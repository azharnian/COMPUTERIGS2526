<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Online Judge - {{problem.title}}</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
    textarea { width: 100%; min-height: 220px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    pre { background: #f6f8fa; padding: 12px; border-radius: 8px; overflow:auto; }
    .row { display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media (min-width: 900px){ .row { grid-template-columns: 1.1fr 0.9fr; } }
    .btn { background:#111827; color:white; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; }
    .badge { display:inline-block; padding:4px 8px; border-radius:999px; font-size:12px; }
    .ok { background:#DCFCE7; color:#166534; }
    .wa { background:#FFE4E6; color:#9F1239; }
    .tl { background:#FEF9C3; color:#713F12; }
    .ce { background:#E0E7FF; color:#3730A3; }
    .re { background:#F1F5F9; color:#111827; }
    .muted { color:#6b7280; }
    label { font-weight:600; }
    select, textarea { border:1px solid #ddd; border-radius:8px; padding:10px; }
    details summary { cursor: pointer; }
  </style>
</head>
<body>
  <h1>Mini Online Judge</h1>
  <p class="muted">Problem ID: <code>{{problem.id}}</code></p>
  <div class="row">
    <div class="card">
      <h2>{{problem.title}}</h2>
      <p>{{problem.statement}}</p>
      <form method="POST">
        <div style="margin-bottom:10px">
          <label for="lang">Bahasa</label><br/>
          <select name="lang" id="lang">
            <option value="python" {% if lang=='python' %}selected{% endif %}>Python</option>
            <option value="cpp" {% if lang=='cpp' %}selected{% endif %}>C++</option>
          </select>
        </div>
        <div style="margin-bottom:10px">
          <label for="code">Kode Sumber</label><br/>
          <textarea id="code" name="code" spellcheck="false">{{code}}</textarea>
        </div>
        <button class="btn" type="submit">Submit & Judge</button>
      </form>
      <details style="margin-top:8px">
        <summary>Contoh solusi benar</summary>
        <h4>Python</h4>
        <pre>print("Hello, World!")</pre>
        <h4>C++</h4>
<pre>#include &lt;bits/stdc++.h&gt;
using namespace std;
int main(){ cout &lt;&lt; "Hello, World!" &lt;&lt; endl; }</pre>
      </details>
    </div>
    <div class="card">
      <h2>Hasil</h2>
      {% if result %}
        <p>Status:
          {% if result.status == 'Accepted' %}<span class="badge ok">Accepted</span>{% endif %}
          {% if result.status == 'Wrong Answer' %}<span class="badge wa">Wrong Answer</span>{% endif %}
          {% if result.status == 'Time Limit Exceeded' %}<span class="badge tl">Time Limit Exceeded</span>{% endif %}
          {% if result.status == 'Compilation Error' %}<span class="badge ce">Compilation Error</span>{% endif %}
          {% if result.status == 'Runtime Error' %}<span class="badge re">Runtime Error</span>{% endif %}
        </p>
        {% if result.compile_output %}
          <h4>Compile Output</h4>
          <pre>{{result.compile_output}}</pre>
        {% endif %}
        <h4>Program Output</h4>
        <pre>{{(result.stdout or '')|e}}</pre>
        {% if result.stderr %}
          <h4>Stderr</h4>
          <pre>{{result.stderr}}</pre>
        {% endif %}
        <p class="muted">Expected (exact match): <code>{{expected}}</code></p>
      {% else %}
        <p>Submit kode untuk melihat hasil.</p>
      {% endif %}
    </div>
  </div>
  <p class="muted">Catatan: Demo lokal saja. Jangan jalankan kode tak dipercaya di produksi.</p>
</body>
</html>
